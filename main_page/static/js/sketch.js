// Initialize the Image Classifier method with DoodleNet.
let classifier;

// Two variable to hold the label and confidence of the result
let labelSpan, labelSpan1;
let confidenceSpan;
let clearButton;
let canvas;

// console.log("ml5 version:", ml5.version);

//필터링
const keyword_fillter = {
  aircraft_carrier: "비행기",
  airplane: "비행기",
  alarm_clock: "시계",
  ambulance: "자동차",
  angel: "엄마",
  animal_migration: "새",
  ant: "벌레",
  anvil: "쟁반",
  apple: "사과",
  arm: "팔",
  asparagus: "곡식",
  axe: "도깨비",
  backpack: "친구",
  banana: "달",
  bandage: "태극기",
  barn: "집",
  baseball: "구슬",
  baseball_bat: "손",
  basket: "바구니",
  basketball: "구슬",
  bat: "나비",
  bathtub: "집",
  beach: "바다",
  bear: "곰",
  beard: "할아버지",
  bed: "집",
  bee: "윙윙",
  belt: "아빠",
  bench: "호수",
  bicycle: "친구",
  binoculars: "잠자리",
  bird: "새",
  birthday_cake: "생일",
  blackberry: "사과",
  blueberry: "사과",
  book: "선생님",
  boomerang: "새",
  bottlecap: "둥근 해",
  bowtie: "리본",
  bracelet: "구슬",
  brain: "솜사탕",
  bread: "과자",
  bridge: "발",
  broccoli: "나무",
  broom: "나무",
  bucket: "바구니",
  bulldozer: "기차",
  bus: "자동차",
  bush: "솜사탕",
  butterfly: "나비",
  cactus: "나무",
  cake: "생일",
  calculator: "과자",
  calendar: "집",
  camel: "나귀",
  camera: "텔레비전",
  camouflage: "오빠",
  campfire: "마법",
  candle: "마법",
  cannon: "밥",
  canoe: "호수",
  car: "자동차",
  carrot: "도라지",
  castle: "집",
  cat: "고양이",
  ceiling_fan: "집",
  cello: "노래",
  cell_phone: "친구",
  chair: "집",
  chandelier: "집",
  church: "학교",
  circle: "구슬",
  clarinet: "마법",
  clock: "시계",
  cloud: "구름",
  coffee_cup: "물",
  compass: "시계",
  computer: "텔레비전",
  cookie: "과자",
  cooler: "집",
  couch: "집",
  cow: "송아지",
  crab: "개구리",
  crayon: "아기",
  crocodile: "물고기",
  crown: "별",
  cruise_ship: "쪽배",
  cup: "물",
  diamond: "사랑",
  dishwasher: "물",
  diving_board: "바다",
  dog: "강아지",
  dolphin: "물고기",
  donut: "과자",
  door: "집",
  dragon: "둘리",
  dresser: "집",
  drill: "마법",
  drums: "북",
  duck: "새",
  dumbbell: "사랑",
  ear: "달",
  elbow: "길",
  elephant: "코끼리",
  envelope: "태극기",
  eraser: "태극기",
  eye: "눈",
  eyeglasses: "눈",
  face: "얼굴",
  fan: "연",
  feather: "보리",
  fence: "학교",
  finger: "손",
  fire_hydrant: "도깨비",
  fireplace: "인디언",
  firetruck: "자동차",
  fish: "물고기",
  flamingo: "새",
  flashlight: "빛",
  flip_lops: "발",
  floor_lamp: "빛",
  flower: "꽃",
  flying_saucer: "구슬",
  foot: "발",
  fork: "밥",
  frog: "개구리",
  frying_pan: "밥",
  garden: "앞뜰",
  garden_hose: "집",
  giraffe: "기린",
  goatee: "아빠",
  golf_club: "마법",
  grapes: "구슬",
  grass: "풀",
  guitar: "인디언",
  hamburger: "과자",
  hammer: "밥",
  hand: "손",
  harp: "시계",
  hat: "모자",
  headphones: "사과",
  hedgehog: "벌레",
  helicopter: "자동차",
  helmet: "모자",
  hexagon: "눈",
  hockey_puck: "태극기",
  hockey_stick: "태극기",
  horse: "나귀",
  hospital: "학교",
  hot_air_balloon: "마법",
  hot_dog: "과자",
  hot_tub: "물",
  hourglass: "시계",
  house: "집",
  house_plant: "꽃",
  hurricane: "바람",
  ice_cream: "아이스크림",
  jacket: "몸",
  jail: "집",
  kangaroo: "다람쥐",
  key: "과자",
  keyboard: "과자",
  knee: "무릎",
  knife: "도라지",
  ladder: "학교",
  lantern: "빛",
  laptop: "텔레비전",
  leaf: "잎",
  leg: "발",
  light_bulb: "빛",
  lighter: "빛",
  lighthouse: "등대",
  lightning: "하늘",
  line: "바다",
  lion: "여우",
  lipstick: "학교",
  lobster: "물고기",
  lollipop: "과자",
  mailbox: "고향",
  map: "고향",
  marker: "학교",
  matches: "나무",
  megaphone: "바람",
  mermaid: "물고기",
  microphone: "노래",
  microwave: "텔레비전",
  monkey: "원숭이",
  moon: "달",
  mosquito: "잠자리",
  motorbike: "자동차",
  mountain: "산",
  mouse: "다람쥐",
  moustache: "아저씨",
  mouth: "윗니",
  mug: "물",
  mushroom: "토마토",
  nail: "산",
  necklace: "구슬",
  nose: "코",
  ocean: "바다",
  octagon: "고향",
  octopus: "물고기",
  onion: "토마토",
  oven: "태극기",
  owl: "부엉",
  paintbrush: "마법",
  paint_can: "마법",
  palm_tree: "나무",
  panda: "곰",
  pants: "빤스",
  paper_clip: "씨앗",
  parachute: "마법",
  parrot: "새",
  passport: "태극기",
  peanut: "씨앗",
  pear: "사과",
  peas: "콩",
  pencil: "집",
  penguin: "새",
  piano: "손",
  pickup_truck: "자동차",
  picture_frame: "친구",
  pig: "돼지",
  pillow: "쟁반",
  pineapple: "사과",
  pizza: "밥",
  pliers: "인디언",
  police_car: "자동차",
  pond: "호수",
  pool: "호수",
  popsicle: "아이스크림",
  postcard: "고향",
  potato: "호수",
  power_outlet: "창가",
  purse: "태극기",
  rabbit: "토끼",
  raccoon: "다람쥐",
  radio: "텔레비전",
  rain: "눈",
  rainbow: "무지개",
  rake: "밥",
  remote_control: "과자",
  rhinoceros: "코끼리",
  rifle: "비행기",
  river: "시냇물",
  roller_coaster: "발",
  rollerskates: "새신",
  sailboat: "쪽배",
  sandwich: "밥",
  saw: "마법",
  saxophone: "노래",
  school_bus: "자동차",
  scissors: "마법",
  scorpion: "물고기",
  screwdriver: "마법",
  sea_turtle: "물고기",
  see_saw: "시소",
  shark: "물고기",
  sheep: "송아지",
  shoe: "새신",
  shorts: "빤스",
  shovel: "마법",
  sink: "쪽배",
  skateboard: "자동차",
  skull: "얼굴",
  skyscraper: "학교",
  sleeping_bag: "아기",
  smiley_face: "웃음",
  snail: "잠자리",
  snake: "물고기",
  snorkel: "바다",
  snowflake: "눈",
  snowman: "눈사람",
  soccer_ball: "구슬",
  sock: "새신",
  speedboat: "쪽배",
  spider: "잠자리",
  spoon: "마법",
  spreadsheet: "학교",
  square: "태극기",
  squiggle: "바다",
  squirrel: "다람쥐",
  stairs: "산",
  star: "별",
  steak: "고기",
  stereo: "텔레비전",
  stethoscope: "마법",
  stitches: "길",
  stop_sign: "자동차",
  stove: "둥근 해",
  strawberry: "토마토",
  streetlight: "빛",
  string_bean: "콩",
  submarine: "쪽배",
  suitcase: "동네",
  sun: "둥근 해",
  swan: "새",
  sweater: "아빠",
  swing_set: "친구",
  sword: "도깨비",
  syringe: "마법",
  table: "쟁반",
  teapot: "물",
  teddy_bear: "곰",
  telephone: "집",
  television: "텔레비전",
  tennis_racquet: "솜사탕",
  tent: "산",
  The_Eiffel_Tower: "산",
  The_Great_Wall_of_China: "학교",
  The_Mona_Lisa: "엄마",
  tiger: "고양이",
  toaster: "과자",
  toe: "발",
  toilet: "집",
  tooth: "윗니",
  toothbrush: "윗니",
  toothpaste: "윗니",
  tornado: "바람",
  tractor: "자동차",
  traffic_light: "과자",
  train: "기차",
  tree: "나무",
  triangle: "산",
  trombone: "노래",
  truck: "자동차",
  trumpet: "노래",
  t_shirt: "오빠",
  umbrella: "빗방울",
  underwear: "빤스",
  van: "자동차",
  vase: "꽃",
  violin: "노래",
  washing_machine: "집",
  watermelon: "시소",
  waterslide: "시냇물",
  whale: "바다",
  wheel: "자동차",
  windmill: "등대",
  wine_bottle: "물",
  wine_glass: "물",
  wristwatch: "시계",
  yoga: "엄마",
  zebra: "루돌프",
  zigzag: "토끼",
};

function preload() {
  classifier = ml5.imageClassifier("DoodleNet");
}

let button;

function setup() {
  canvas = createCanvas(280, 280);
  canvas.parent("sketch-holder");
  background(255);
  classifier.classify(canvas, gotResult);

  // Create a clear canvas button
  clearButton = select("#clearBtn");
  clearButton.mousePressed(clearCanvas);

  // Create 'label' and 'confidence' div to hold results
  // labelSpan = select("#label");
  // confidenceSpan = select("#confidence");

  labelSpan1 = select("#label1");
  labelSpan2 = select("#label2");
  labelSpan3 = select("#label3");
  labelSpan4 = select("#label4");
  labelSpan5 = select("#label5");
  labelSpan6 = select("#label6");

  // button = createButton("snap");
  // button.mousePressed(takesnap);
}

function clearCanvas() {
  background(255);
}

function draw() {
  strokeWeight(16);
  stroke(0);
  if (mouseIsPressed) {
    line(pmouseX, pmouseY, mouseX, mouseY);
  }
}

// A function to run when we get any errors and the results
function gotResult(error, results) {
  // Display error in the console
  if (error) {
    console.error(error);
    return;
  }
  // // The results are in an array ordered by confidence.
  // console.log(results);
  // // Show the first label and confidence

  // labelSpan.html(results[0].label);
  // confidenceSpan.html(floor(100 * results[0].confidence));

  labelSpan1.html(keyword_fillter[results[0].label]);
  labelSpan2.html(keyword_fillter[results[1].label]);
  labelSpan3.html(keyword_fillter[results[2].label]);
  labelSpan4.html(keyword_fillter[results[3].label]);
  labelSpan5.html(keyword_fillter[results[4].label]);
  labelSpan6.html(keyword_fillter[results[5].label]);

  classifier.classify(canvas, gotResult);
}
